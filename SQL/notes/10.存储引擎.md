# 存储引擎

---

## mysql 体系结构

![mysql体系结构](img/mysql-platform.png)

连接层、服务层、引擎层(索引在存储引擎层)(mysql5.5以后默认innoDB)、存储层

1. 连接层：
        
        最上层是一些客户端连接和服务，主要完成一些类似于连接处理，授权认证及相关的安全方案。服务器也会为安全接入的每个客户端验证他所具有的操作权限
2. 服务层：

        第二层架构主要完成大多数的核心服务功能，如SQL接口，并完成缓存的查询，SQL的分析和优化，部分内置函数的执行。所有跨存储引擎的功能也在这一层实现，如过程、函数等。
3. 引擎层：

        存储引擎真正的负责了MYSQL中数据的存储和提取，服务器通过API和存储引擎进行通信，不同的存储引擎具有不同的功能，这样我们可以根据自己的需要来选取合适的存储引擎。
4. 存储层：

        主要是将数据存储在文件系统之上，并完成与存储引擎的交互。

---

## 存储引擎简介

存储引擎就是存储数据、建立索引、更新/查询你数据等技术的实现方式。存储引擎是基于表的而不是基于库的，所以存储引擎也被称为表类型

1. 创建表时指定存储引擎：

        CREATE TABLE XXX(
            //COLUMNS
        )ENGINE = INNODB;

2. 查询数据库支持的存储引擎：
    
        SHOW ENGINES;

---

## InnoDB

InnoDB 是一种兼顾高可靠性和高性能的通用存储引擎，在MySQL5.5之后，InnoDB是默认的MYSQL存储引擎

特点：
    
    1. DML操作遵循ACID模型，支持事物
    2. 行级锁，提高并发访问性能
    3. 支持外键约束，保证数据的完整性和正确性

每一个innodb的表都会有一个 xxx.idb 文件存储该表的表结构、数据和索引。

TableSpace -> segment -> Extent -> page -> Row

---

## MyIsAm

MyIsAM 是早期的默认存储引擎

特点：

    1. 不支持事物、不支持外键
    2. 支持表锁，不支持行锁
    3. 访问速度快

每一个MyIsam的表会有三个文件  xxx.sdi 存储表结构、xxx.myd存储数据、xxx.myi存储索引信息

---


## Memory

Memory 引擎的表数据是存储在内存中的，由于受到硬件或断电等影响，只能将这些表作为临时表使用。

特点：

    1. 内存存放
    2. hash索引(默认）

每一个Memory表只有一个xxx.sdi文件存放表结构。

---




