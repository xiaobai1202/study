# 视图

---

视图是一种虚拟存在的表，视图中的数据并不在数据库中实际存在，行和列数据来自定义视图的查询中使用的表，并且实在是用视图时动态生成的。

通俗的讲，视图只保存了查询的sql逻辑，不保存查询结果。所以我们在创建视图的时候，主要工作就落在创建这条SQL查询语句上.

1. 创建视图

        CREATE [OR REPLACE] VIEW 视图名称[(列名列表)] AS SELECT语句 [WITH [CASCADED|LOCAL] CHECK OPTION]
2. 查询视图

        查看创建视图语句： SHOW CREATE VIEW 视图名
        查询视图数据： 与操作表一样的SELECT
3. 修改视图

        CREATE [OR REPLACE] VIEW 视图名称[(列名列表)] AS SELECT语句 [WITH [CASCADED|LOCAL] CHECK OPTION]
        ALTER VIEW 视图名称[(列名列表)] AS SELECT语句 [WITH [CASCADED|LOCAL] CHECK OPTION]
4. 删除视图

        DROP VIEW [IF EXISTS] 视图名称...
5. 检查选项

    当使用WITH CHECK OPTION子句创建视图时，MYSQL会通过视图检查正在更改的每个行，例如 插入、更新、删除，以使其符合视图的定义。MYSQL允许基于另一个视图创建视图，它还会检查依赖视图中的规则以保持一致性。为了确定检查的范围，MYSQL提供了两个选项 CASCADED和LOCAL，默认值为CASCADED

        CASCADED: 不仅检查当前视图的约束，还会检查依赖视图的约束。
        
        LOCAL: 在mysql8.0中，会检查当前视图的约束，同时也会递归依赖视图，但是是否需要检查约束取决于依赖视图是否配置约束。

6. 视图的更新

    要使视图可以更新，视图中的行与基础表中的行必须存在一对一的关系，如果视图包含以下任意一项，则视图不能更新：

        1. 使用了聚合函数
        2. 使用了distinct
        3. 使用了 group by
        4. 使用了having 分组条件
        5. 使用了union 或者union all

7. 视图的作用
        
        1. 操作简单
        2. 使用安全